# X Sentiment Tab - Complete Automation Guide

**Last Updated:** October 23, 2025

## Overview

The X Sentiment tab is **fully automated** and updates automatically when you run the master workflow. This includes:
- ‚úÖ Sentiment scores and trends
- ‚úÖ Top narratives
- ‚úÖ Trending words (all categories)
- ‚úÖ **crypto_trending** (tickers, key levels, events with velocity)
- ‚úÖ **macro_trending** (tickers, emerging, key levels, events with velocity)

---

## üöÄ How to Run (Simple Version)

Run the complete workflow with a single command:

```bash
python scripts/automation/run_workflow.py 2025-10-23
```

**That's it!** The workflow automatically:
1. Processes X data to generate trending words JSON
2. Calculates velocity (comparing to previous day)
3. Populates crypto_trending and macro_trending sections
4. Updates all other sentiment fields

---

## üìä What Gets Updated Automatically

### Basic Sentiment Fields (Always Updated)
- `aiInterpretation` - AI summary and insights
- `sentimentScore` - Combined crypto + macro score (0-100)
- `sentimentTrend` - rising/stable/falling
- `sentimentTier` - BULLISH/NEUTRAL/BEARISH
- `contrarian_signal` - Contrarian adjustment
- `sentiment_breakdown` - Distribution of sentiment
- `hype_cycle` - Position in hype cycle
- `top_narratives` - Top 5 narratives from summaries
- `influencer_consensus` - Tier sentiment consensus
- `trending_words` - All categories of trending words

### NEW: crypto_trending (Fully Automated)
- **top_tickers** - Top 7 crypto tickers with:
  - mentions count
  - velocity (e.g., "+68%", "NEW", "STABLE", "FADING")
  - signal (RISING, STABLE, FADING)
- **key_levels** - Support/resistance levels extracted from summaries
- **event_risk** - High-impact events from notable posts
- **updatedAt** - Timestamp

### NEW: macro_trending (Fully Automated)
- **top_tickers** - Top 10 equity/macro tickers with velocity
- **emerging_tickers** - NEW tickers with significant mentions (alpha opportunities)
- **key_levels** - Key levels for major indices
- **event_risk** - Macro event risk from summaries
- **updatedAt** - Timestamp

---

## üîÑ Complete Automation Flow

### Data Collection (Pre-Workflow)
**Frequency:** Run daily or as needed

```bash
python scripts/automation/run_all_scrapers.py
```

**What it does:**
1. Scrapes X/Twitter lists (Crypto, Macro, Technicals)
2. Scrapes bookmarks
3. Archives daily X data (separates by date)
4. Generates X Crypto & Macro summaries

**Output Files:**
- `Research/X/Crypto/x_list_posts_YYYYMMDD_archived.json`
- `Research/X/Macro/x_list_posts_YYYYMMDD_archived.json`
- `Research/X/YYYY-MM-DD_X_Crypto_Summary.md`
- `Research/X/YYYY-MM-DD_X_Macro_Summary.md`

---

### Master Workflow (Main Automation)
**Frequency:** Run once per trading day

```bash
python scripts/automation/run_workflow.py 2025-10-23
```

**Relevant Phases:**

#### Phase 3.7: Process Trending Words ‚ú® NEW
**Script:** `Research/X/Trends/process_trends.py`

**What it does:**
- Loads today's archived X data (crypto + macro)
- Extracts trending tickers, themes, macro topics
- **Calculates velocity** by comparing to previous day
- Assigns signals (HOT, RISING, COOLING, STABLE, NEW)

**Output:**
- `Research/X/Trends/YYYY-MM-DD_trending_words.json`

**Sample Output:**
```json
{
  "categories": {
    "tickers_crypto": [
      {"word": "BTC", "mentions": 128, "velocity_24h": "+68%", "signal": "RISING"},
      {"word": "ETH", "mentions": 35, "velocity_24h": "NEW", "signal": "RISING"}
    ],
    "tickers_equities": [
      {"word": "SPY", "mentions": 67, "velocity_24h": "+168%", "signal": "RISING"},
      {"word": "NVDA", "mentions": 24, "velocity_24h": "STABLE", "signal": "STABLE"}
    ]
  }
}
```

#### Phase 3.75: Update X Sentiment Tab ‚ú® ENHANCED
**Script:** `scripts/automation/update_x_sentiment_tab.py`

**What it does:**
- Loads crypto/macro summaries
- Loads trending words JSON (from Phase 3.7)
- Loads previous day's trending words (for velocity calculation)
- **NEW: Extracts crypto_trending data:**
  - Top tickers with velocity
  - Key levels from summaries
  - Event risk from notable posts
- **NEW: Extracts macro_trending data:**
  - Top tickers with velocity
  - Emerging tickers (NEW entries)
  - Key levels
  - Event risk
- Updates all sentiment fields

**Output:**
- Updates `master-plan/master-plan.md` (X Sentiment tab)

---

## üìÅ Data Dependencies

### Required Files for Full Update

1. **X Data (from scrapers):**
   - `Research/X/Crypto/x_list_posts_YYYYMMDD_archived.json`
   - `Research/X/Macro/x_list_posts_YYYYMMDD_archived.json`

2. **X Summaries (generated by scrapers):**
   - `Research/X/YYYY-MM-DD_X_Crypto_Summary.md`
   - `Research/X/YYYY-MM-DD_X_Macro_Summary.md`

3. **Trending Words (generated by workflow Phase 3.7):**
   - `Research/X/Trends/YYYY-MM-DD_trending_words.json`
   - `Research/X/Trends/YYYY-MM-DD-1_trending_words.json` (previous day for velocity)

---

## üõ†Ô∏è Manual Execution (If Needed)

### Generate Trending Words Only
```bash
python Research/X/Trends/process_trends.py 2025-10-23
```

### Update X Sentiment Tab Only
```bash
python scripts/automation/update_x_sentiment_tab.py 2025-10-23
```

---

## ‚ö†Ô∏è Troubleshooting

### crypto_trending and macro_trending are empty

**Likely Causes:**
1. Trending words JSON doesn't exist for the date
2. X data wasn't scraped/archived for the date
3. Summaries don't exist for the date

**Solution:**
```bash
# 1. Check if X data exists
ls Research/X/Crypto/x_list_posts_*_archived.json
ls Research/X/Macro/x_list_posts_*_archived.json

# 2. If missing, run scrapers first
python scripts/automation/run_all_scrapers.py

# 3. Then run workflow
python scripts/automation/run_workflow.py 2025-10-23
```

### Velocity shows "NEW" for all tickers

**Cause:** Previous day's trending words JSON doesn't exist

**Solution:**
- Run the workflow for yesterday first to establish baseline:
```bash
python Research/X/Trends/process_trends.py 2025-10-22
```
- Then run today:
```bash
python scripts/automation/run_workflow.py 2025-10-23
```

### Event risk section is empty

**Cause:** No high-impact events in summaries, or summaries don't have "Notable Posts" section

**Expected Behavior:** This is normal if there were no CRITICAL/HIGH/EXTREME impact events

---

## üìà Velocity Calculation Logic

**How it works:**
- Compares today's mention count to yesterday's
- Formula: `((today - yesterday) / yesterday) * 100`

**Signals:**
- `NEW` - Ticker didn't appear yesterday
- `+X%` - Positive change (e.g., "+68%")
- `-X%` - Negative change (e.g., "-20%")
- `FADING` - Dropped more than 50%
- `STABLE` - No change

**Signal Classification:**
- `RISING` - NEW or +50% or higher
- `STABLE` - No change or small change
- `FADING` - Dropped more than 50%

---

## üîç Verification

After running the workflow, verify the update:

```bash
# Check trending words file was created
cat Research/X/Trends/2025-10-23_trending_words.json

# Check master plan was updated
grep -A 10 "crypto_trending:" master-plan/master-plan.md
grep -A 10 "macro_trending:" master-plan/master-plan.md

# View dashboard
# Open master-plan/research-dashboard.html in browser
# Click "X Sentiment" tab
# Scroll to "Crypto Trending Tickers" and "Macro Trending Tickers" sections
```

---

## üéØ Best Practices

1. **Run scrapers first thing in the morning**
   ```bash
   python scripts/automation/run_all_scrapers.py
   ```

2. **Run workflow after market data is available**
   ```bash
   python scripts/automation/run_workflow.py 2025-10-23
   ```

3. **Check dashboard for data quality**
   - Green indicators = fresh data (< 12 hours)
   - Yellow indicators = aging data (12-24 hours)
   - Red indicators = stale data (> 24 hours)

4. **Build historical velocity data**
   - Run process_trends.py for the last 3-5 days to establish velocity baseline

---

## üìö Additional Resources

- **Workflow Overview:** `scripts/automation/run_workflow.py` (see docstring)
- **Scraper Guide:** `scripts/automation/run_all_scrapers.py` (see docstring)
- **YAML Handler:** `scripts/utilities/yaml_handler.py` (handles master-plan.md)

---

## üí° Summary

**You don't need to do anything manual!** Just run:

```bash
python scripts/automation/run_workflow.py 2025-10-23
```

And the crypto_trending and macro_trending sections will be automatically populated with:
- Top tickers with velocity calculations
- Emerging opportunities
- Key support/resistance levels
- High-impact event risk

The automation is **bulletproof** as long as you:
1. Run scrapers to collect X data
2. Run the workflow to process and update everything
